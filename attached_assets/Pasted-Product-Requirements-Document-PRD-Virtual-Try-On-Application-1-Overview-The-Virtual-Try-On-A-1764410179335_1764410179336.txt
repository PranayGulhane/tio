Product Requirements Document (PRD)
Virtual Try-On Application
1. Overview

The Virtual Try-On App enables clothing stores to allow their customers to preview outfits digitally using AI image generation (Gemini 2.5 Flash Image). The system provides separate roles for the company owner, store managers, and end users, with secure access and QR-based temporary login for store customers.

The product offers a centralized dashboard for usage analytics, a clothing management system for stores, and a seamless try-on experience for customers.

2. Goals & Objectives
Primary Goals

Enable fashion stores to upload and manage clothing inventory (images, categories, barcodes).

Enable customers to try clothing items virtually using their own photos.

Provide usage analytics for platform owner (company owner).

Provide QR-based ephemeral access for customers.

Non-Goals

No payment system needed for users or stores in V1.

No multi-device session persistence beyond QR session limitations.

No bulk uploads in V1.

3. User Roles & Permissions
1. Company Owner (Platform Admin)

Full platform access.

Create store accounts (store manager accounts).

View usage analytics per store:

Number of try-on calls

Number of clothes uploaded

User sessions created

Suspend/activate store accounts.

No access to individual customer photos/clothing assets.

2. Store Manager (Store Admin)

Manage store profile and reset their password.

Upload/edit/delete clothing items:

Clothing image

Category/type

Barcode

Mark any clothing item “Unavailable”.

Generate QR codes for 1-hour temporary customer sessions.

View store-only analytics: clothing availability, try-on count.

3. Customer (User)

Temporarily logged in using a QR code.

Session expires in 1 hr.

Upload their photo for try-on.

Browse/filter/select clothes.

Scan barcodes of physical clothes for quick selection.

Generate try-on results using Gemini 2.5 Flash Image.

View results per selected item.

4. Functional Requirements
4.1 Authentication & Authorization
Company Owner

Admin dashboard login.

Create store manager account:

Email (username)

Temporary password

Reset store passwords.

JWT-based token authentication.

Store Manager

Login with email + temporary password.

Mandatory password reset on first login.

Can request password reset anytime.

Customer

Login through QR code → auto-authenticated ephemeral token.

No password needed.

Token expires after 1 hour.

4.2 Store Management (Store Manager)
4.2.1 Clothing Item CRUD

Each item includes:

image (stored in S3)

category (e.g., shirts, jackets)

barcode (string/number)

status → Available/Unavailable

created_at, updated_at

Actions:

Upload clothing items.

Update image, category, barcode.

Delete items.

Mark unavailable/available.

4.2.2 QR Code Generation

One-click QR code creation.

Encodes a temporary login token or unique session URL.

Valid for 1 hour.

Store manager can generate unlimited QR codes.

4.3 Customer Try-On Workflow
4.3.1 Access

Customer scans QR code → redirected → temporary session.

Display store’s branded try-on interface.

4.3.2 Clothing Selection

Users can:

Browse thumbnails

Filter by category

Scan barcode of physical clothes with the device camera

Select one or more clothing items

4.3.3 Try-On Generation

User uploads their photo.

For each selected clothing item → 1 AI generation call.

Model used: Gemini 2.5 Flash Image

Returns composite try-on image.

4.3.4 Output Display

Show generated try-on image(s).

Allow downloading (optional).

Automatically delete customer photo after session ends (privacy).

4.4 Analytics (Dashboard)
Company Owner View

Number of stores

Usage per store:

API calls for try-on

Number of clothes uploaded

Total customer sessions

Storage usage

Store Manager View

Total try-on attempts

Active customer sessions

Clothing availability stats

5. System Architecture Requirements
5.1 Frontend

Tech: Next.js + React.js + TailwindCSS
Deployed on: GCP Cloud Run (Static export or server-side)

Frontend modules:

Store Manager Dashboard

Company Owner Dashboard

Customer Try-On Interface

Login flows, QR scanning page

5.2 Backend

Tech: FastAPI (Python)
Deployed on: GCP Cloud Run

Backend responsibilities:

Authentication & token management

QR session management

Clothing CRUD

S3 interactions (upload/list/delete)

Generation API (Gemini 2.5 Flash Image)

Analytics data aggregation

Postgres DB interactions via SQLAlchemy

5.3 Database

PostgreSQL
with SQLAlchemy ORM
and Alembic for migrations.

Tables:

company_owner

stores

store_managers

clothing_items

qr_sessions

customer_sessions

usage_logs (API call logs)

try_on_history

5.4 Storage

AWS S3 (or MinIO for mock local dev)
Used for storing:

Clothing images

(Optional) generated try-on images

Customer uploaded photos should be deleted automatically after 1 hour or after try-on is complete.

5.5 Containerization

Dockerfile for backend

Dockerfile for frontend

docker-compose.yml for local development

5.6 CI/CD (GitHub Actions)

Pipelines:

Lint + test backend (pytest)

Lint + test frontend (jest)

Build Docker images

Deploy to GCP Cloud Run

Auto triggers on:

Pull Request

Push to main

5.7 Testing
Frontend

Unit tests with Jest

Component tests with React Testing Library

E2E tests optional (Playwright)

Backend

Unit tests + integration tests using Pytest

Mock S3 + mock Gemini API

Automated test execution in CI

6. User Flows
6.1 Company Owner Flow

Login → Dashboard

Create store account → email + temp password

Monitor store stats

Reset store password if needed

6.2 Store Manager Flow

Login → forced password reset (first time)

Access dashboard:

Add new clothing item

Edit/delete/mark unavailable

Generate QR code

View try-on usage stats

6.3 Customer Flow

Scan QR code at store

Temporary login (auto)

Upload selfie

Browse/filter/select clothing

(Optional) scan barcode to find item fast

Click “Try On”

AI generates output(s)

View/download results

Session expires in 1 hour

7. API Requirements (High-Level)
Auth

POST /auth/login

POST /auth/refresh

POST /auth/store/create (admin only)

POST /auth/store/reset-password

Store Management

GET /store/items

POST /store/items

PATCH /store/items/{id}

DELETE /store/items/{id}

POST /store/items/{id}/toggle-availability

QR Sessions

POST /store/qr/generate

GET /qr/{token}/validate

Customer Try-On

POST /customer/upload-photo

GET /customer/clothes?category=

POST /customer/scan-barcode

POST /tryon (call Gemini)

Analytics

GET /analytics/store/{id}

GET /analytics/global

8. Security Requirements

JWT authentication for all users.

Expiring tokens for customers.

Rate limiting on AI generation endpoint.

S3 signed URLs for secure uploads.

Delete customer images after session expiry.

Enforce HTTPS for all endpoints.

9. Performance Requirements

Try-on generation response: < 10 seconds per item (dependent on Gemini latency).

QR session creation: < 100ms.

Clothing list load: < 300ms.

Should scale horizontally on GCP Cloud Run.

10. Success Metrics
For Company Owner

API call growth per store

Number of stores onboarded

Average tries per customer session

For Store Managers

Clothing uploads

Try-on conversions

QR session usage

For Customers

Session completion rate

Multi-item try-on behavior